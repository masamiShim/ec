<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="freitech.se.ec.repository.read.ItemReadRepository">
    <resultMap id="ItemMap" type="freitech.se.ec.mo.Item" autoMapping="true">
        <association property="id" javaType="freitech.se.ec.mo.Id">
            <id property="id" column="id"/>
        </association>
        <association property="content" resultMap="ItemEntityMap" columnPrefix="content_" />
        <association property="audit" resultMap="SecurityMap" columnPrefix="audit_" />
    </resultMap>
    <resultMap id="SecurityMap" type="freitech.se.ec.mo.SecurityAudit">
        <result property="created" column="created"/>
        <result property="createdBy" column="createdBy"/>
        <result property="modified" column="modified"/>
        <result property="modifiedBy" column="modifiedBy"/>
        <result property="deleted" column="deleted"/>
    </resultMap>
    <resultMap id="ItemEntityMap" type="freitech.se.ec.entity.ItemEntity">
        <result property="exhibitorId" column="exhibitor_id"/>
        <result property="name" column="name"/>
        <result property="code" column="code"/>
        <result property="price" column="price"/>
        <result property="quantity" column="quantity"/>
    </resultMap>
    <select id="findByPk" resultMap="ItemMap">
        SELECT
            I.id as id,
            I.exhibitor_id as content_exhibitor_id,
            I.name as content_name,
            I.code as content_code,
            I.price as content_price,
            I.quantity as content_quantity,
            I.comment as content_comment,
            I.created as audit_created,
            I.createdBy as audit_createdBy,
            I.modified as audit_modified,
            I.modifiedBy as audit_modifiedBy,
            I.deleted as audit_deleted
          FROM
            Item I
          WHERE
              Id = #{id}
    </select>
</mapper>
